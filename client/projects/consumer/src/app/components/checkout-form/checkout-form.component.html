<form [formGroup]="form" (ngSubmit)="onSubmit()">
  <ion-grid>
    <ion-row>
      <ion-col size="12">
        <ion-item>
          <ion-label position="floating">Name on card</ion-label>
          <ion-input formControlName="nameOnCard" required type="text"></ion-input>
        </ion-item>
        <ng-container *ngIf="nameOnCard.touched">
          <small *ngIf="nameOnCard.errors | keyvalue as errors">
            <ion-text color="danger">
              <span [ngSwitch]="errors[0].key">
                <ng-container *ngSwitchCase="'required'">Name on card is required</ng-container>
              </span>
            </ion-text>
          </small>
        </ng-container>
      </ion-col>
    </ion-row>
    <ion-row>
      <!-- Card number -->
      <ion-col size="12">
        <ion-item>
          <ion-label position="floating">Card number</ion-label>
          <ion-input formControlName="cardNumber" required type="text" inputmode="tel"></ion-input>
        </ion-item>
        <ng-container *ngIf="cardNumber.touched">
          <small *ngIf="cardNumber.errors | keyvalue as errors">
            <ion-text color="danger">
              <span [ngSwitch]="errors[0].key">
                <ng-container *ngSwitchCase="'invalidCardNumber'">Invalid card number</ng-container>
                <ng-container *ngSwitchCase="'required'">Card number is required</ng-container>
              </span>
            </ion-text>
          </small>
        </ng-container>
      </ion-col>
    </ion-row>
    <ion-row>
      <!-- Expiry Date -->
      <ion-col size="6">
        <ion-item>
          <ion-label position="floating">MM / YY</ion-label>
          <span>
            <ion-input
              #mmdd
              [min]="currentDate | date: 'yyyy-mm'"
              class="h-0 w-0 ion-no-padding ion-no-margin"
              name="month"
              required
              style="--padding-bottom: 0; --padding-top: 0"
              type="month"
            ></ion-input>
            <ion-input
              formControlName="validThru"
              [value]="getValue(mmdd.value)"
              name="text"
              readonly
              (click)="openMonthYearSelector(mmdd)"
            ></ion-input>
          </span>
        </ion-item>
        <ng-container *ngIf="validThru.touched">
          <small *ngIf="validThru.errors | keyvalue as errors">
            <ion-text color="danger">
              <span [ngSwitch]="errors[0].key">
                <ng-container *ngSwitchCase="'invalidExpiryDate'">Invalid Expiry Date</ng-container>
                <ng-container *ngSwitchCase="'required'">Expiry date is required</ng-container>
              </span>
            </ion-text>
          </small>
        </ng-container>
      </ion-col>
      <!-- CVC -->
      <ion-col size="6">
        <ion-item>
          <ion-label position="floating">CVC</ion-label>
          <ion-input formControlName="cvc" required type="text" inputmode="tel" min="000" minLength="3" maxLength="3"></ion-input>
        </ion-item>
        <ng-container *ngIf="cvc.touched">
          <small *ngIf="cvc.errors | keyvalue as errors">
            <ion-text color="danger">
              <span [ngSwitch]="errors[0].key">
                <ng-container *ngSwitchCase="'invalidCVC'">Invalid CVC</ng-container>
                <ng-container *ngSwitchCase="'required'">CVC is required</ng-container>
                <ng-container *ngSwitchCase="'minlength'">CVC should have {{ errors[0].value.requiredLength }} digits</ng-container>
              </span>
            </ion-text>
          </small>
        </ng-container>
      </ion-col>
    </ion-row>
    <ion-row>
      <ion-col size="6">
        <ion-item>
          <ion-label position="floating">First name</ion-label>
          <ion-input formControlName="firstname" required type="text"></ion-input>
        </ion-item>
      </ion-col>

      <ion-col size="6">
        <ion-item>
          <ion-label position="floating">Last name</ion-label>
          <ion-input formControlName="lastname" required type="text"></ion-input>
        </ion-item>
      </ion-col>
    </ion-row>
    <ion-row>
      <ion-col size="12">
        <ion-item>
          <ion-label position="floating">Mobile number</ion-label>
          <ion-input formControlName="mobileNumber" required type="tel" inputmode="tel"></ion-input>
          <ion-icon
            role="button"
            (click)="openInputInfo({ header: 'Mobile number', message: 'We need mobile number to send you a security code.' })"
            class="mt-3 ion-activatable ripple-parent cursor-pointer"
            name="information-circle-outline"
            slot="end"
            title="Tooltip"
          >
            <ion-ripple-effect type="unbounded"></ion-ripple-effect>
          </ion-icon>
        </ion-item>
      </ion-col>
    </ion-row>
    <ion-row>
      <ion-col size="12">
        <ion-item>
          <ion-icon
            role="button"
            (click)="openInputInfo({ header: 'Email', message: 'We need email to send you the invoice of this order.' })"
            class="mt-3 ion-activatable ripple-parent cursor-pointer"
            name="information-circle-outline"
            slot="end"
            title="Tooltip"
          >
            <ion-ripple-effect type="unbounded"></ion-ripple-effect>
          </ion-icon>
          <ion-label position="floating">Email</ion-label>
          <ion-input formControlName="email" required type="email"></ion-input>
        </ion-item>
      </ion-col>
    </ion-row>
    <ion-row>
      <ion-col size="12" size-sm="10" size-md="8" size-lg="6" offset-lg="3" offset-md="2" offset-sm="1">
        <!-- [routerLink]="['/checkout-success']" -->
        <ion-button type="submit" [disabled]="false" color="light" expand="block" fill="outline"> Checkout </ion-button>

        <!-- <ion-button type="submit" [disabled]="!form.touched || !form.invalid" color="light" expand="block" fill="outline">
          Checkout
        </ion-button> -->
      </ion-col>
    </ion-row>
  </ion-grid>
</form>
